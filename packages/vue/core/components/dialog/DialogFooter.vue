<script lang="ts">
export interface DialogFooterProps extends Theme {
  class?: HTMLAttributes['class']
  ui?: {
    root?: HTMLAttributes['class']
    cancel?: HTMLAttributes['class']
    ok?: HTMLAttributes['class']
  }
  widget?: {
    cancel?: ComponentProps<typeof Button> & { text?: string }
    ok?: ComponentProps<typeof Button> & { text?: string }
  }
}
</script>

<script setup lang="ts">
import type { Theme } from '@rui-ark/vue/providers/theme'
import type { HTMLAttributes } from 'vue'
import type { ComponentProps } from 'vue-component-type-helpers'
import { ark } from '@ark-ui/vue/factory'
import { Button } from '@rui-ark/vue/components/button'
import { useTheme } from '@rui-ark/vue/composables/useTheme'
import { computed, useId } from 'vue'
import { DialogCloseTrigger, TriggerFrom } from '.'

const { class: propsClass, theme: propsTheme, ui, widget } = defineProps<DialogFooterProps>()
const emits = defineEmits<{
  ok: [event: MouseEvent]
  cancel: [event: MouseEvent]
}>()
const id = useId()

// theme
const theme = useTheme(() => propsTheme)
const crafts = computed(() => theme.value.crafts.tvDialog())
</script>

<template>
  <ark.div
    :id="`dialog:${id}:footer`"
    data-scope="dialog"
    data-part="footer"
    :class="crafts.footer({ class: [ui?.root, propsClass], ...theme })"
  >
    <slot>
      <DialogCloseTrigger
        as-child
        :from="TriggerFrom.CANCEL_BUTTON"
      >
        <Button
          variant="text"
          v-bind="widget?.cancel"
          :class="ui?.cancel"
          :theme="theme"
          @click="emits('cancel', $event)"
        >
          {{ widget?.cancel?.text ?? 'Cancel' }}
        </Button>
      </DialogCloseTrigger>
      <DialogCloseTrigger
        as-child
        :from="TriggerFrom.OK_BUTTON"
      >
        <Button
          v-bind="widget?.ok"
          :class="ui?.ok"
          :theme="theme"
          @click="emits('ok', $event)"
        >
          {{ widget?.ok?.text ?? 'OK' }}
        </Button>
      </DialogCloseTrigger>
    </slot>
  </ark.div>
</template>
